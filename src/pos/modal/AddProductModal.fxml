<?xml version="1.0" encoding="UTF-8"?>

<?import java.net.URL?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.shape.Line?>
<?import javafx.scene.text.Font?>

<AnchorPane fx:id="rootPane" prefHeight="730.0" prefWidth="770.0"
            xmlns="http://javafx.com/javafx/24.0.1"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="pos.CRUD.AddProductController"
            styleClass="ap-root">

    <stylesheets>
        <URL value="@/pos/css/addProduct.css"/>
    </stylesheets>

    <BorderPane prefHeight="720.0" prefWidth="820.0"
                AnchorPane.topAnchor="0" AnchorPane.bottomAnchor="0"
                AnchorPane.leftAnchor="0" AnchorPane.rightAnchor="0"
                styleClass="ap-shell">

        <!-- Header -->
        <top>
            <VBox spacing="6" styleClass="ap-topbar">
                <padding>
                    <Insets top="14" right="16" bottom="12" left="16"/>
                </padding>

                <Label text="Add New Product" styleClass="ap-title">
                    <font>
                        <Font name="Arial Bold" size="16.0"/>
                    </font>
                </Label>

                <Label text="Fill in product details, variants, and stock information."
                       styleClass="ap-subtitle"/>

            </VBox>
        </top>

        <!-- Scrollable content -->
        <center>
            <ScrollPane fitToWidth="true" styleClass="ap-scroll">
                <content>
                    <VBox spacing="14" styleClass="ap-content">
                        <padding>
                            <Insets top="16" right="16" bottom="16" left="16"/>
                        </padding>

                        <!-- Card: Product Details -->
                        <VBox spacing="12" styleClass="ap-card">
                            <Label text="Product Details" styleClass="ap-section-title"/>

                            <GridPane hgap="16" vgap="12">
                                <columnConstraints>
                                    <ColumnConstraints minWidth="150"/>
                                    <ColumnConstraints hgrow="ALWAYS"/>
                                </columnConstraints>

                                <Label text="Name:" styleClass="ap-label" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                                <TextField fx:id="txtName" promptText="Product Name"
                                           styleClass="ap-field"
                                           GridPane.rowIndex="0" GridPane.columnIndex="1"/>

                                <Label text="Description:" styleClass="ap-label" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                                <TextArea fx:id="txtDescription" promptText="Product Description" prefRowCount="3"
                                          styleClass="ap-area"
                                          GridPane.rowIndex="1" GridPane.columnIndex="1"/>

                                <Label text="Category:" styleClass="ap-label" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                                <ComboBox fx:id="cmbCategory" promptText="Select Category"
                                          styleClass="ap-field"
                                          GridPane.rowIndex="2" GridPane.columnIndex="1"/>

                                <Label text="Supplier:" styleClass="ap-label" GridPane.rowIndex="3" GridPane.columnIndex="0"/>
                                <ComboBox fx:id="cmbSupplier" promptText="Select Supplier"
                                          styleClass="ap-field"
                                          GridPane.rowIndex="3" GridPane.columnIndex="1"/>

                                <Label text="SKU:" styleClass="ap-label" GridPane.rowIndex="4" GridPane.columnIndex="0"/>
                                <TextField fx:id="txtSKU" promptText="SKU"
                                           styleClass="ap-field"
                                           GridPane.rowIndex="4" GridPane.columnIndex="1"/>

                                <Label text="Barcode:" styleClass="ap-label" GridPane.rowIndex="5" GridPane.columnIndex="0"/>
                                <TextField fx:id="txtBarcode" promptText="Barcode"
                                           styleClass="ap-field"
                                           GridPane.rowIndex="5" GridPane.columnIndex="1"/>

                                <Label text="Inventory Tracking:" styleClass="ap-label" GridPane.rowIndex="6" GridPane.columnIndex="0"/>
                                <ComboBox fx:id="cmbInventoryTracking" promptText="Select Track"
                                          styleClass="ap-field"
                                          GridPane.rowIndex="6" GridPane.columnIndex="1"/>

                                <Label text="Base Unit:" styleClass="ap-label" GridPane.rowIndex="7" GridPane.columnIndex="0"/>
                                <TextField fx:id="txtBaseUnit" promptText="e.g. piece, box"
                                           styleClass="ap-field"
                                           GridPane.rowIndex="7" GridPane.columnIndex="1"/>

                                <Label text="Price:" styleClass="ap-label" GridPane.rowIndex="8" GridPane.columnIndex="0"/>
                                <TextField fx:id="txtPrice" promptText="0.00"
                                           styleClass="ap-field"
                                           GridPane.rowIndex="8" GridPane.columnIndex="1"/>

                                <Label text="Discount (%):" styleClass="ap-label" GridPane.rowIndex="9" GridPane.columnIndex="0"/>
                                <TextField fx:id="txtDiscount" promptText="0.00"
                                           styleClass="ap-field"
                                           GridPane.rowIndex="9" GridPane.columnIndex="1"/>

                                <Label text="Cost:" styleClass="ap-label" GridPane.rowIndex="10" GridPane.columnIndex="0"/>
                                <TextField fx:id="txtCost" promptText="0.00"
                                           styleClass="ap-field"
                                           GridPane.rowIndex="10" GridPane.columnIndex="1"/>

                                <Label text="Initial Stock:" styleClass="ap-label" GridPane.rowIndex="11" GridPane.columnIndex="0"/>
                                <TextField fx:id="txtInitialStock" promptText="0"
                                           styleClass="ap-field"
                                           GridPane.rowIndex="11" GridPane.columnIndex="1"/>

                                <Label text="Reorder Level:" styleClass="ap-label" GridPane.rowIndex="12" GridPane.columnIndex="0"/>
                                <TextField fx:id="txtReorderLevel" promptText="0"
                                           styleClass="ap-field"
                                           GridPane.rowIndex="12" GridPane.columnIndex="1"/>

                                <Label text="Product Type:" styleClass="ap-label" GridPane.rowIndex="13" GridPane.columnIndex="0"/>
                                <ComboBox fx:id="cmbProductType" promptText="Select Product Type"
                                          styleClass="ap-field"
                                          GridPane.rowIndex="13" GridPane.columnIndex="1"/>

                                <Label text="Image:" styleClass="ap-label" GridPane.rowIndex="14" GridPane.columnIndex="0"/>
                                <HBox spacing="10" alignment="CENTER_LEFT"
                                      GridPane.rowIndex="14" GridPane.columnIndex="1">
                                    <Button fx:id="btnUploadImage" onAction="#handleUploadImage"
                                            text="Upload Image" styleClass="ap-btn-secondary"/>
                                    <Label fx:id="lblImageName" text="No file selected" styleClass="ap-muted"/>
                                </HBox>
                            </GridPane>
                        </VBox>

                        <!-- Card: Variants -->
                        <VBox spacing="12" styleClass="ap-card">
                            <HBox alignment="CENTER_LEFT">
                                <Label text="Variants" styleClass="ap-section-title"/>
                                <Region HBox.hgrow="ALWAYS"/>
                                <Label text="(Variable products only)" styleClass="ap-muted"/>
                            </HBox>

                            <TableView fx:id="variantTable" prefHeight="170" styleClass="ap-table">
                                <columns>
                                    <TableColumn fx:id="vNameCol" text="Name" prefWidth="140"/>
                                    <TableColumn fx:id="vSkuCol" text="SKU" prefWidth="90"/>
                                    <TableColumn fx:id="vBarcodeCol" text="Barcode" prefWidth="90"/>
                                    <TableColumn fx:id="vPriceCol" text="Price" prefWidth="80"/>
                                    <TableColumn fx:id="vCostCol" text="Cost" prefWidth="80"/>
                                    <TableColumn fx:id="vStockCol" text="Stock" prefWidth="70"/>
                                    <TableColumn fx:id="vActiveCol" text="Active" prefWidth="70"/>
                                </columns>
                            </TableView>

                            <GridPane hgap="10" vgap="10" styleClass="ap-variant-grid">
                                <columnConstraints>
                                    <ColumnConstraints percentWidth="22"/>
                                    <ColumnConstraints percentWidth="12"/>
                                    <ColumnConstraints percentWidth="14"/>
                                    <ColumnConstraints percentWidth="12"/>
                                    <ColumnConstraints percentWidth="12"/>
                                    <ColumnConstraints percentWidth="10"/>
                                    <ColumnConstraints percentWidth="18"/>
                                </columnConstraints>

                                <TextField fx:id="vTxtName" promptText="Variant name" styleClass="ap-field"
                                           GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                                <TextField fx:id="vTxtSku" promptText="SKU" styleClass="ap-field"
                                           GridPane.rowIndex="0" GridPane.columnIndex="1"/>
                                <TextField fx:id="vTxtBarcode" promptText="Barcode" styleClass="ap-field"
                                           GridPane.rowIndex="0" GridPane.columnIndex="2"/>
                                <TextField fx:id="vTxtPrice" promptText="Price" styleClass="ap-field"
                                           GridPane.rowIndex="0" GridPane.columnIndex="3"/>
                                <TextField fx:id="vTxtCost" promptText="Cost" styleClass="ap-field"
                                           GridPane.rowIndex="0" GridPane.columnIndex="4"/>
                                <TextField fx:id="vTxtStock" promptText="Stock" styleClass="ap-field"
                                           GridPane.rowIndex="0" GridPane.columnIndex="5"/>

                                <HBox spacing="10" alignment="CENTER_LEFT"
                                      GridPane.rowIndex="0" GridPane.columnIndex="6">
                                    <CheckBox fx:id="vChkActive" text="Active" selected="true" styleClass="ap-check"/>
                                    <Button text="Add" onAction="#addVariantRow" styleClass="ap-btn-primary"/>
                                    <Button text="Remove" onAction="#removeVariantRow" styleClass="ap-btn-danger"/>
                                </HBox>
                            </GridPane>

                        </VBox>

                    </VBox>
                </content>
            </ScrollPane>
        </center>

        <!-- Footer -->
        <bottom>
            <HBox alignment="CENTER" styleClass="ap-footer">
                <padding>
                    <Insets top="12" right="14" bottom="12" left="14"/>
                </padding>
                <Button fx:id="btnSubmit" onAction="#handleProductSubmit"
                        prefWidth="420" prefHeight="40"
                        text="Submit"
                        styleClass="ap-submit"/>
            </HBox>
        </bottom>

    </BorderPane>
</AnchorPane>
